<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/docusaurus-test/blog/rss.xml" title="Tp Spring Batch Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docusaurus-test/blog/atom.xml" title="Tp Spring Batch Blog Atom Feed"><title data-react-helmet="true">Mon premier Job | Tp Spring Batch</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://github.com/docusaurus-test/docs/tutorial-basics/first-job"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Mon premier Job | Tp Spring Batch"><meta data-react-helmet="true" name="description" content="Objectifs"><meta data-react-helmet="true" property="og:description" content="Objectifs"><link data-react-helmet="true" rel="shortcut icon" href="/docusaurus-test/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/docusaurus-test/docs/tutorial-basics/first-job"><link data-react-helmet="true" rel="alternate" href="https://github.com/docusaurus-test/docs/tutorial-basics/first-job" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/docusaurus-test/docs/tutorial-basics/first-job" hreflang="x-default"><link rel="stylesheet" href="/docusaurus-test/assets/css/styles.73f7287a.css">
<link rel="preload" href="/docusaurus-test/assets/js/runtime~main.5cc016b5.js" as="script">
<link rel="preload" href="/docusaurus-test/assets/js/main.53acb7d7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docusaurus-test/"><img src="/docusaurus-test/img/spring.jpeg" alt="Spring Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docusaurus-test/img/spring.jpeg" alt="Spring Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Tp Spring Batch</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docusaurus-test/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/GoroGoraK/docusaurus-test" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docusaurus-test/docs/intro">Tutorial Intro</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial - Initialisation</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorial - Premier Batch</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docusaurus-test/docs/tutorial-basics/first-job">Mon premier Job</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus-test/docs/tutorial-basics/datasource">DataSource</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus-test/docs/tutorial-basics/first-test">Mes premiers tests automatisés</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus-test/docs/tutorial-basics/profile">Profile Spring</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial - Traitement par Lot</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial - Tips</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Mon premier Job</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="objectifs"></a>Objectifs<a class="hash-link" href="#objectifs" title="Direct link to heading">#</a></h2><p>L&#x27;objectif de ce TP sera de créer un <em>batch</em> composé d&#x27;une seule <em>Step</em> elle même composée d&#x27;une <em>Tasklet</em>.</p><p>Cette <em>Tasklet</em> devra lire un fichier en entrée à partir d&#x27;un chemin absolu défini dans le fichier de configuration de l&#x27;application et logguer son contenu dans la console.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="traitement-cible"></a>Traitement cible<a class="hash-link" href="#traitement-cible" title="Direct link to heading">#</a></h3><p>Voici le traitement à mettre en place.</p><div class="mermaid">sequenceDiagram
  participant JL as JobLauncher
  participant J as myFirstJob
  participant S as myFirstSteo
  participant T as myFirstTasklet
  JL-&gt;&gt;J: Lance
  J-&gt;&gt;S: Execute
  S-&gt;&gt;T: Execute
  Note right of T: Log dans la console.</div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="structure-physique"></a>Structure Physique<a class="hash-link" href="#structure-physique" title="Direct link to heading">#</a></h3><p>Voici la structure à atteindre lors de cette partie :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">📦tutorial-spring-batch</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┣ 📂src</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ ┣ 📂main</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ ┃ ┣ 📂java</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃ ┗🔸fr.goro.tutorial.spring.batch</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃  ℹ️ Package racine du code source de l&#x27;application</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┣🔸firstbatch</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃ ┃  ℹ️ Package racine de notre premier batch </span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃ ┣🔸config</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃ ┃  ┃ ℹ️ Package contenant la définition des @Bean Spring, les classes à développer ici sont suffixées du mode Configuration (ou Config)</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃ ┃  ┣🔸step</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃ ┃  ┃  ┃ ℹ️ Package contenant la définition  des @Bean Step</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃ ┃  ┃  ┗ 📜FirstTaskletStepConfiguration.java</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃ ┃  ┗ 📜FirstBatchConfiguration.java</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃ ┗🔸tasklet</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃  ┃ ℹ️ Package contenant la logique métier des tasklets.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┃  ┗ 📜FirstTasklet.java</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃   ┗ 📜TutorialSpringBatchApplication.java</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃ ┗ 📂resources</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃   ┃ ℹ️ Resources de l&#x27;application</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">┃ ┃   ┗ 📜application.yml</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ ┣ 📂test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ ┃ ┣ 📂java</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ ┃ ┃  ℹ️ Code source des tests unitaires de l&#x27;application</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ ┃ ┗ 📂resources</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ ┃     ℹ️ Resources des tests unitaires (jeux de données,...)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃ ┗ 📂it</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃   ┣ 📂java</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃   ┃   ℹ️ Code source des tests d&#x27;intégration</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃   ┗ 📂resources</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┃       ℹ️ Resource des tests d&#x27;intégration (configuration Spring, ...)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">┗ 📜pom.xml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="préambule"></a>Préambule<a class="hash-link" href="#préambule" title="Direct link to heading">#</a></h2><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Attention</h5></div><div class="admonition-content"><p>La structure de package présentée ici n&#x27;est qu&#x27;un exemple, il convient de l&#x27;adapter en fonction des clients / besoin.</p></div></div><p>On retrouve dans le code source (<code>src/main/java</code>) deux sous packages principaux :</p><ul><li><p>config </p><ul><li>Il contiendra uniquement des méthodes permettant la définition de <em>@Bean</em> <em>Spring</em></li><li>Il pourra contenir des fichiers suffixés de <em>Configuration</em> (ou <em>Config</em>) pour la définition des @Bean et <em>Properties</em> (ou <em>Property</em>) pour la définition d&#x27;objet de propriétés définies dans l&#x27;<em>application.yml</em></li><li>Il ne contiendra aucune logique métier, uniquement de la définition de <em>@Bean</em> / properties.</li><li>On s&#x27;appuiera autant que possible sur des <em>class</em> <em>Spring</em> afin de minimiser le code source à développer au sein des autres <em>package</em></li></ul></li><li><p>tasklet</p><ul><li>Il contiendra uniquement le développement métier de nos tasklets.</li><li>Une tasklet implémente l&#x27;interface <em>Spring</em> <em>Tasklet</em></li></ul></li></ul><p>Nous découvrirons d&#x27;autres <em>package</em> dans les différentes parties du tutoriel.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="configuration-yaml--bundle-properties"></a>Configuration YAML / Bundle (properties)<a class="hash-link" href="#configuration-yaml--bundle-properties" title="Direct link to heading">#</a></h2><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Best Practice </h5></div><div class="admonition-content"><p>Spring charge automatiquement les propriétés déclarées dans l&#x27;application.yml ou l&#x27;application.properties présent dans son <code>classpath</code>, autant l&#x27;utiliser !</p></div></div><p>Commençons par la configuration <em>YAML</em> (au format YML). Nous allons y déclarer le chemin vers un fichier à lire.</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">application.yml</div><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">inputFile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /chemin/vers/fichier_traiter.txt</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Attention</h5></div><div class="admonition-content"><p>Le chemin contenu dans la variable <code>inputFile</code> doit être modifié.</p></div></div><p>Une fois le fichier créé, nous allons pouvoir créer notre <code>Tasklet</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="première-tasklet"></a>Première Tasklet<a class="hash-link" href="#première-tasklet" title="Direct link to heading">#</a></h2><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><ul><li>Le logger utilisé sera celui par défaut (<a href="https://logback.qos.ch/manual/introduction.html" target="_blank" rel="noopener noreferrer">logback</a> : <code>org.slf4j.Logger</code>), de ce fait, aucune configuration ne sera nécessaire.</li></ul></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Détail pour la réalisation du TP</h5></div><div class="admonition-content"><ul><li><p>La tasklet lira le contenu d&#x27;un fichier (pensez à un attribut de type <code>Resource</code>) et le logguera en info (par défaut, dans la sortie standard : notre bonne vieille console !).</p></li><li><p>Notre tasklet devra implémenter l&#x27;objet Spring Batch <code>Tasklet</code>, vous pouvez vous inspirer de la [documentation officielle](partie Tasklet)[https://docs.spring.io/spring-batch/docs/current/reference/html/index-single.html#exampleTaskletImplementation]].</p></li></ul></div></div><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary><a class="btnfire small stroke"><em class="fas fa-chevron-circle-down"></em>Voir la soluce</a></summary><div><div class="collapsibleContent_3OHp"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">fr.goro.tutorial.spring.batch.firstbatch.tasklet.FirstTasklet.java</div><div class="codeBlockContent_hGly jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> fr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goro</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tutorial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spring</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstbatch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasklet</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> java</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Files</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> java</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stream</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Collectors</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slf4j</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Logger</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">slf4j</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LoggerFactory</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StepContribution</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scope</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChunkContext</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">step</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasklet</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tasklet</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">repeat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RepeatStatus</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Resource</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">util</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Assert</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Classe Première Tasklet, elle ne fera que logguer le contenu d&#x27;un fichier via log4j.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FirstTasklet</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Tasklet</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Logger Slf4j/Logback (logger par défaut) de la classe {@link FirstTasklet}.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> Logger </span><span class="token constant" style="color:#36acaa">LOGGER</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> LoggerFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FirstTasklet</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Le fichier à traiter.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> final Resource inputFile</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Constructeur paramétré de MyFirstTasklet.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @param inputFile le fichier à traiter.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">FirstTasklet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">final Resource inputFile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Assert</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">notNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputFile</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Le fichier en entrée de la Tasklet ne peut être vide !&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inputFile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> inputFile</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Méthode de traitement de {@link FirstTasklet}.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Cette méthode logguera uniquement le contenu du fichier passé en paramétre.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> RepeatStatus </span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">final StepContribution contribution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> final ChunkContext chunkContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> throws Exception </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token constant" style="color:#36acaa">LOGGER</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Files</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">lines</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputFile</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">joining</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> RepeatStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FINISHED</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Best Practice</h5></div><div class="admonition-content"><p>Ne jamais utiliser d&#x27;annotation dans une classe de traitement. Pour un batch <em>Spring</em>, les annotations ne seront acceptées que dans la classe main du batch, ainsi que dans le package <em>config</em>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="première-step"></a>Première Step<a class="hash-link" href="#première-step" title="Direct link to heading">#</a></h2><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Best Practice</h5></div><div class="admonition-content"><ul><li><p>Nous définissons nos @Bean dans un package <em>config</em> (ou <em>configuration</em>), il n&#x27;y a que dans ce package qu&#x27;on utilisera des annotations (autre que <code>@SpringBootApp</code> sur la main class).</p></li><li><p><em>Spring</em> gère très bien l&#x27;injection de <em>Resource</em> via un simple @Value(&quot;${maVariabke}&quot;).</p></li><li><p>L&#x27;utilisation de JavaDoc est obligatoire 😉.</p></li></ul></div></div><p>A l&#x27;aide de la documentation officielle, tentez de créer votre première configuration de <em>Step</em></p><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary><a class="btnfire small stroke"><em class="fas fa-chevron-circle-down"></em></a></summary><div><div class="collapsibleContent_3OHp"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">fr.goro.tutorial.spring.batch.firstbatch.config.step.FirstTaskletStepConfiguration.java</div><div class="codeBlockContent_hGly jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> fr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goro</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tutorial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spring</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstbatch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">step</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Step</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">configuration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StepBuilderFactory</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">step</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasklet</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tasklet</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">beans</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Bean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Configuration</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Resource</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> fr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goro</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tutorial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spring</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstbatch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tasklet</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">FirstTasklet</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Classe de configuration de notre première {@link Step} composée d&#x27;une {@link Tasklet} {@link FirstTasklet}.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FirstTaskletStepConfiguration</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Définition de la step de lecture de fichier.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @param stepBuilderFactory la factory de construction de {@link Step}.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @param myFirstTasklet notre première {@link Tasklet} de lecture de fichier.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @return notre première {@link Step} composé de notre première {@link Tasklet}.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> Step </span><span class="token function" style="color:#d73a49">myFirstStep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">final StepBuilderFactory stepBuilderFactory</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> final Tasklet myFirstTasklet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> stepBuilderFactory</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;myFirstStep&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tasklet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myFirstTasklet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Définition de notre première {@link Tasklet} de lecture de fichier.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @param directoryPath la {@link Resource} dont le path est issu du fichier de configuration.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @return notre première {@link Tasklet} configurée.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> Tasklet </span><span class="token function" style="color:#d73a49">myFirstTasklet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">@</span><span class="token function" style="color:#d73a49">Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;${inputFile}&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> final Resource directoryPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">FirstTasklet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">directoryPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="premier-job"></a>Premier Job<a class="hash-link" href="#premier-job" title="Direct link to heading">#</a></h2><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Interdit</h5></div><div class="admonition-content"><ul><li>Il s&#x27;agit d&#x27;une partie &quot;Configuration&quot;, aucune logique métier ne doit être présente, on n&#x27;utilise autant que possible des objets <code>Spring Batch</code> pour définir nos <code>@Bean</code>.</li></ul></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Détail pour la réalisation du TP</h5></div><div class="admonition-content"><ul><li>Création d&#x27;un <code>@Bean</code> de type <code>Job</code> (<a href="https://docs.spring.io/spring-batch/docs/current/reference/html/index-single.html#configuringAJob" target="_blank" rel="noopener noreferrer">Documentation officielle</a>).</li></ul></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Info</h5></div><div class="admonition-content"><ul><li>Il s&#x27;agit ici de la classe principale de configuration de notre batch, nous conviendrons d&#x27;ajouter l&#x27;<code>@EnableBatchProcessing</code> permettant entre autre la configuration du JobRepository nécessaire au fonctionnement de <code>Spring Batch</code> ici.</li></ul></div></div><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary><a class="btnfire small stroke"><em class="fas fa-chevron-circle-down"></em>Voir la soluce</a></summary><div><div class="collapsibleContent_3OHp"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">fr.goro.tutorial.spring.batch.firstbatch.config.FirstBatchConfiguration.java</div><div class="codeBlockContent_hGly jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> fr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goro</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tutorial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spring</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstbatch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Job</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Step</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">configuration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EnableBatchProcessing</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">configuration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">JobBuilderFactory</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Bean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Configuration</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Configuration global du batch.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableBatchProcessing</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FirstBatchConfiguration</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Définition de notre {@link Job}.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @param jobBuilderFactory la factory de construction de {@link Job}</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @param myFirstStep notre première {@link} step composée de notre première tasklet.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * @return notre premier {@link Job} Spring Batch.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> Job </span><span class="token function" style="color:#d73a49">myFirstJob</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">final JobBuilderFactory jobBuilderFactory</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> final Step myFirstStep</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> jobBuilderFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;myFirstJob&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myFirstStep</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></details><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="test-de-lapplication"></a>Test de l&#x27;application<a class="hash-link" href="#test-de-lapplication" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="méthode-de-lancement"></a>Méthode de lancement<a class="hash-link" href="#méthode-de-lancement" title="Direct link to heading">#</a></h3><p>Plusieurs méthode de lancement sont possibles :</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="terminal"></a>Terminal<a class="hash-link" href="#terminal" title="Direct link to heading">#</a></h4><p>Via un terminal, depuis votre workspace, vous pouvez taper :</p><ul><li>Lancement de l&#x27;application :</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar target/tutorial-spring-batch-0.0.1-SNAPSHOT.jar</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>De cette manière, <code>Spring</code> lancera l&#x27;ensemble des <code>Job</code> qu&#x27;il trouvera.</p><p>Pour les besoins du TP, nous utiliserons le <code>CommandLineRunner</code> proposé par <code>Spring</code>, il nous permettra de lancer notre batch en précisant le fichier de configuration <code>Java</code> utilisé.
<a href="https://docs.spring.io/spring-batch/docs/current/reference/html/index-single.html#runningJobsFromCommandLine" target="_blank" rel="noopener noreferrer">La documentation officiel de <code>Spring</code> à ce sujet</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar target/tutorial-spring-batch-0.0.1-SNAPSHOT.jar CommandLineJobRunner fr.goro.tutorial.spring.batch.firstbatch.config.FirstBatchConfiguration myFirstJob</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="launcher"></a>Launcher<a class="hash-link" href="#launcher" title="Direct link to heading">#</a></h4><p>La majorité des IDE propose différent Launcher permettant de lancer des applications, au choix :</p><ul><li>Java Application.</li><li>Spring Boot App (dépend généralement d&#x27;un plugin supplémentaire relatif à l&#x27;IDE utilisé).</li></ul><p>Comme pour le terminal, et pour les besoins du TP, nous utiliserons le <code>CommandLineRunner</code>, pensez donc à ajouter ce qui suit en argument de votre Launcher :</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Paramétre de Launcher</div><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">CommandLineJobRunner fr.goro.tutorial.spring.batch.firstbatch.config.FirstBatchConfiguration myFirstJob</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="analyse-de-log"></a>Analyse de log<a class="hash-link" href="#analyse-de-log" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Résultat de la commande</div><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  .   ____          _            __ _ _</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> =========|_|==============|___/=/_/_/_/</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> :: Spring Boot ::                (v2.5.4)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:38.200  INFO 192067 --- [           main] f.g.t.s.b.TutorialSpringBatchApplication : Starting TutorialSpringBatchApplication using Java 11.0.11 on goro-XPS-15-9560 with PID 192067 (/home/goro/Documents/workspace/tutorial-spring-batch/target/classes started by goro in /home/goro/Documents/workspace/tutorial-spring-batch)</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:38.206  INFO 192067 --- [           main] f.g.t.s.b.TutorialSpringBatchApplication : No active profile set, falling back to default profiles: default</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:40.612  INFO 192067 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:41.193  INFO 192067 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:41.814  INFO 192067 --- [           main] o.s.b.c.r.s.JobRepositoryFactoryBean     : No database type set, using meta data indicating: H2</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.305  INFO 192067 --- [           main] o.s.b.c.l.support.SimpleJobLauncher      : No TaskExecutor has been set, defaulting to synchronous executor.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.574  INFO 192067 --- [           main] f.g.t.s.b.TutorialSpringBatchApplication : Started TutorialSpringBatchApplication in 5.969 seconds (JVM running for 7.069)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.579  INFO 192067 --- [           main] o.s.b.a.b.JobLauncherApplicationRunner   : Running default command line with: [CommandLineJobRunner, fr.goro.tutorial.spring.batch.firstbatch.config.FirstBatchConfiguration, myFirstJob]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.735  INFO 192067 --- [           main] o.s.b.c.l.support.SimpleJobLauncher      : Job: [SimpleJob: [name=myFirstJob]] launched with the following parameters: [{}]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.825  INFO 192067 --- [           main] o.s.batch.core.job.SimpleStepHandler     : Executing step: [readFile]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.851  INFO 192067 --- [           main] f.g.t.s.b.f.tasklet.FirstTasklet         : Contenu du fichier affichier par My First Tasklet</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">####### ######            #####  ######  ######  ### #     #  #####     ######     #    #######  #####  #     #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   #    #     #          #     # #     # #     #  #  ##    # #     #    #     #   # #      #    #     # #     #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   #    #     #          #       #     # #     #  #  # #   # #          #     #  #   #     #    #       #     #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   #    ######            #####  ######  ######   #  #  #  # #  ####    ######  #     #    #    #       #######</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   #    #                      # #       #   #    #  #   # # #     #    #     # #######    #    #       #     #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   #    #                #     # #       #    #   #  #    ## #     #    #     # #     #    #    #     # #     #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   #    #                 #####  #       #     # ### #     #  #####     ######  #     #    #     #####  #     #</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">               #####</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#     # #     #    ####### ### ######   #####  #######    #######    #     #####  #    # #       ####### #######</span></span><span class="token-line" style="color:#393A34"><span class="token plain">##   ##  #   #     #        #  #     # #     #    #          #      # #   #     # #   #  #       #          #</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># # # #   # #      #        #  #     # #          #          #     #   #  #       #  #   #       #          #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#  #  #    #       #####    #  ######   #####     #          #    #     #  #####  ###    #       #####      #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#     #    #       #        #  #   #         #    #          #    #######       # #  #   #       #          #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#     #    #       #        #  #    #  #     #    #          #    #     # #     # #   #  #       #          #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#     #    #       #       ### #     #  #####     #          #    #     #  #####  #    # ####### #######    #</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.874  INFO 192067 --- [           main] o.s.batch.core.step.AbstractStep         : Step: [readFile] executed in 47ms</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.887  INFO 192067 --- [           main] o.s.b.c.l.support.SimpleJobLauncher      : Job: [SimpleJob: [name=myFirstJob]] completed with the following parameters: [{}] and the following status: [COMPLETED] in 99ms</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.897  INFO 192067 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-09-01 23:01:42.908  INFO 192067 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>En regardant de plus près les log (lignes surlignées) de notre application, on remarque plusieurs choses :</p><ul><li><p>Aucun profil n&#x27;est utilisé, il utilise donc celui par défaut (notre <code>application.yml</code>);</p></li><li><p>Il demarre avec succés une base de données H2 (alors qu&#x27;on ne lui a rien dit 😒);</p></li><li><p>Le batch a bien lancé le job (sans paramétre à priori), qui a lui même lancé la tasklet;</p></li><li><p>Le bactch a terminé à l&#x27;état COMPLETED</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>Nous avons désormais un premier <em>Spring Batch</em> fonctionnel, qui nous savons tester à la main de différente manière. </p><p>Avant de nous intéresser à cette mystérieuse base de données H2, nous allons automatiser les tests de notre application.</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/tutorial-basics/first-job.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docusaurus-test/docs/tutorial-init/spring-initialization"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Configuration Spring</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docusaurus-test/docs/tutorial-basics/datasource"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DataSource »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objectifs" class="table-of-contents__link">Objectifs</a><ul><li><a href="#traitement-cible" class="table-of-contents__link">Traitement cible</a></li><li><a href="#structure-physique" class="table-of-contents__link">Structure Physique</a></li></ul></li><li><a href="#préambule" class="table-of-contents__link">Préambule</a></li><li><a href="#configuration-yaml--bundle-properties" class="table-of-contents__link">Configuration YAML / Bundle (properties)</a></li><li><a href="#première-tasklet" class="table-of-contents__link">Première Tasklet</a></li><li><a href="#première-step" class="table-of-contents__link">Première Step</a></li><li><a href="#premier-job" class="table-of-contents__link">Premier Job</a></li><li><a href="#test-de-lapplication" class="table-of-contents__link">Test de l&#39;application</a><ul><li><a href="#méthode-de-lancement" class="table-of-contents__link">Méthode de lancement</a></li><li><a href="#analyse-de-log" class="table-of-contents__link">Analyse de log</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Spring Batch</div><ul class="footer__items"><li class="footer__item"><a href="https://docs.spring.io/spring-batch/docs/current/reference/html/index-single.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Spring batch Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/GoroGoraK/docusaurus-test" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docusaurus-test/assets/js/runtime~main.5cc016b5.js"></script>
<script src="/docusaurus-test/assets/js/main.53acb7d7.js"></script>
</body>
</html>